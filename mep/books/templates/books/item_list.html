{% extends 'base.html' %}
{% load static humanize widget_tweaks %}
{% load render_bundle from webpack_loader %}

{% block js %}{% render_bundle 'booksSearch' 'js' %}{% endblock %}

{% block page-subtitle %}Library Holdings Â· {% endblock %}

{% block header %}
{% include 'snippets/header.html' with title="books" style="search" %}
{% endblock %}

{% block main-style %}white{% endblock %}

{% block content %}
<section class="books search-form">
    {% include 'snippets/breadcrumbs.html' %}
    <form id="books-form">
        {% if form.errors %}
        <div role="alert" class="errors" aria-labelledby="errors" aria-live="polite">
            <span id="errors">Errors:</span>
            <ul>
                {% for field, errors in form.errors.items %}
                {# no clean way to get field labels here, so we just collapse the error lists #}
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        <input type="submit" value="submit"/>
        <output class="total-results" id="total">{{ items.count|intcomma }} total result{{ items.count|pluralize }}</output>
    </form>
</section>
<div class="upper-labels"> {# only shown on mobile & tablet before the user scrolls down #}
    <label>SORTED BY</label>
    <label>DISPLAYING</label> 
</div>
<section class="books sort-pages">
    <div class="inner">
        <label class="sort">
            <span>SORTED BY</span>
            {% render_field form.sort form="books-form" %}
            <img class="dropdown icon" src="{% static 'img/icons/chevron_down.png' %}" alt="">
        </label>
        <button type="submit" form="books-form">Go</button>
        {% include 'snippets/pagination.html' with form_id="books-form" %}
    </div>
    <div class="outer">
        {% include 'snippets/page-controls.html' %}
    </div>
</section>
<output form="books-form" class="results" aria-live="polite" aria-labelledby="total">
    {% include 'books/snippets/item_results.html' %}
</output>
{% endblock %}